[–ì–ª–∞–≤–Ω–∞—è](../../README.md) ‚Äî [–ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞](../../README.md) ‚Äî Docker

# Docker

### –ü—Ä–µ–¥–∏—Å–ª–æ–≤–∏–µ

**–°–∏–Ω–æ–Ω–∏–º—ã –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Å—Ç–∞—Ç—å–∏:** 
- –•–æ—Å—Ç ‚âà –û–° ‚âà –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ ‚âà –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞  
- –ò–º—è ‚âà —Ç–µ–≥ (–¥–∞, –≤ –¥–æ–∫–µ—Ä–µ –ø—É—Ç–∞–Ω–∏—Ü–∞ –Ω–µ —Ä–µ–¥–∫–æ—Å—Ç—å)

**–û–±–æ–∑–Ω–∞—á–µ–Ω–∏—è:**  
üíÅ ‚Äî —Å–æ–≤–µ—Ç  
‚ÑπÔ∏è ‚Äî –∏–Ω—Ñ–æ

**–°—Å—ã–ª–∫–∏ –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –¥–æ–∫–∏:**
- [–§–∞–π–ª Dockerfile](https://docs.docker.com/engine/reference/builder/)
- [–£—Ç–∏–ª–∏—Ç–∞ docker-compose](https://docs.docker.com/compose/compose-file/#build)

### –£—á–µ–±–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

**–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –í–æ–ª–æ—á–Ω–µ–≤ ‚Äî –î–æ–∫–µ—Ä –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤: –û—Å–Ω–æ–≤—ã**
- [–î–æ–∫–µ—Ä –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤: –û—Å–Ω–æ–≤—ã (–ó–∞–Ω—è—Ç–∏–µ 1/4)](https://www.youtube.com/watch?v=fgdcgEcI1KA) ‚Äî 2 —á 13 –º–∏–Ω
- [–î–æ–∫–µ—Ä –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤: –û—Å–Ω–æ–≤—ã (–ó–∞–Ω—è—Ç–∏–µ 2/4)](https://www.youtube.com/watch?v=xtPK-SoB7DY) ‚Äî 1 —á 46 –º–∏–Ω
- [–î–æ–∫–µ—Ä –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤: –û—Å–Ω–æ–≤—ã (–ó–∞–Ω—è—Ç–∏–µ 3/4)](https://www.youtube.com/watch?v=fXixKbuTR3Y) ‚Äî 2 —á 00 –º–∏–Ω
- [–î–æ–∫–µ—Ä –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤: –û—Å–Ω–æ–≤—ã (–ó–∞–Ω—è—Ç–∏–µ 4/4)](https://www.youtube.com/watch?v=39zlGay7NkU) ‚Äî 2 —á 15 –º–∏–Ω

- –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ –∫—É—Ä—Å—É –∏–∑ –≤–∏–¥–µ–æ: https://github.com/Entering-IT/Docker-Online-Course

–î–∞–ª–µ–µ –∫–æ–Ω—Å–ø–µ–∫—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–∏—Ö —á–µ—Ç—ã—Ä–µ—Ö –≤–∏–¥–µ–æ.

## [‚Üë](#Docker) –£—Å—Ç–∞–Ω–æ–≤–∫–∞

**Engine** ‚Äî –≤–µ—Ä—Å–∏—è –±–µ–∑ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –¥–∞–ª–µ–µ –≤—Å–µ –ø—Ä–æ –Ω–µ–µ.

### Docker 

- –ë—ã—Å—Ç—Ä–æ, —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (2 –∫–æ–º–∞–Ω–¥—ã): https://github.com/docker/docker-install  


      curl -fsSL https://get.docker.com -o get-docker.sh
      sh get-docker.sh

- –í—Ä—É—á–Ω—É—é:  https://docs.docker.com/engine/install/ubuntu/

- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (–∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)  


      sudo docker run hello-world

### docker-compose (–Ω–µ–æ—Ç—ä–µ–º–ª–µ–º–∞—è —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –¥–æ–∫–µ—Ä–∞)

–£–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–¥–∞—é—Ç—Å—è –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ñ–∞–π–ª–µ —Ñ–æ—Ä–º–∞—Ç–∞ 
[YAML](https://ru.wikipedia.org/wiki/YAML). –ù–µ –ø—Ä–∏–¥–µ—Ç—Å—è –ø–∏—Å–∞—Ç—å –∫–∏–ª–æ–º–µ—Ç—Ä–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã,
—É–¥–æ–±–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ä–∞–∑—É —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø—É—Å–∫–∞—Ç—å.

https://docs.docker.com/compose/install/other/

    curl -SL https://github.com/docker/compose/releases/download/v2.14.0/docker-compose-linux-x86_64 -o /usr/local/bin/docker-compose

üíÅ –ï—Å–ª–∏ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:

    sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose

üíÅ –ï—Å–ª–∏ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞:

    sudo chmod +x /usr/local/bin/docker-compose;

–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

    docker-compose version

## [‚Üë](#Docker) –í–≤–æ–¥–Ω–∞—è —á–∞—Å—Ç—å

–ü–æ–Ω—è—Ç–∏—è –û–±—Ä–∞–∑ –∏ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö 

| –û–±—Ä–∞–∑ ‚Äî —ç—Ç–æ –∫–∞–∫        | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä(—ã) ‚Äî —ç—Ç–æ –∫–∞–∫                                                                                                            |
|------------------------|-----------------------------------------------------------------------------------------------------------------------------------|
| –ö–ª–∞—Å—Å –≤ –û–û–ü            | –ò–Ω—Å—Ç–∞–Ω—Å(—ã) –∫–ª–∞—Å—Å–∞                                                                                                                 |
| –î–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Å–∏—Å—Ç–µ–º–µ (1 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä) –∏–ª–∏ <br/>–Ω–µ—Å–∫–æ–ª—å–∫–æ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –∏–ª–∏ —Ä–∞–∑–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (–Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤) |
| –®–∞–±–ª–æ–Ω –¥–æ–∫—É–º–µ–Ω—Ç–∞       | –ó–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π(–µ) –¥–æ–∫—É–º–µ–Ω—Ç(—ã)                                                                                                        |

`python:3.8-slim` ‚Äî –ø—Ä–∏–º–µ—Ä –Ω–∞–∑–≤–∞–Ω–∏—è –æ–±—Ä–∞–∑–∞ (image), –≥–¥–µ

- `python` ‚Äî –ª—é–±–æ–µ –∏–º—è  
- `3.8-slim` ‚Äî —ç—Ç–æ `—Ç–µ–≥` (–º–µ—Ç–∫–∞), –∫–∞–∫ –∏ –∏–º—è –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º, –Ω–æ –ª—É—á—à–µ –∫–æ–≥–¥–∞ –≤–µ—Ä—Å–∏—è `3.8` + —á—Ç–æ-—Ç–æ –æ–± –æ–±—Ä–∞–∑–µ `slim` (–æ–±–ª–µ–≥—á–µ–Ω–Ω–∞—è)

`[image name]` = `[repository]:[tag]`

–û–±—Ä–∞–∑ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–∞–º–æ–º—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥—Ä—É–≥–æ–≥–æ. –û–±—Ä–∞–∑ –º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –¥–æ–∫–µ—Ä–∞.
–û–±—Ä–∞–∑ `python:3.8` ‚Äî —ç—Ç–æ –≤ –æ–±—Ä–∞–∑ –õ–∏–Ω—É–∫—Å–∞ `Debian`, –≤ –∫–æ—Ç–æ—Ä—É—é –¥–æ–±–∞–≤–∏–ª–∏ –≤–µ—Ä—Å–∏—é —è–∑—ã–∫–∞ python 3.8

–ö–æ–≥–¥–∞ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –æ–±—Ä–∞–∑, —Ç–æ –¥–æ–∫–µ—Ä –¥–µ–ª–∞–µ—Ç –µ–≥–æ –∫–æ–ø–∏—é (—Å –Ω—É–∂–Ω—ã–º–∏ –≤–∞–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏), –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–ø–∏—é
–∏ —Ç–µ–ø–µ—Ä—å —ç—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. –≠—Ç–æ –∏ –µ—Å—Ç—å –≤—Å–µ —Ä–∞–∑–ª–∏—á–∏–µ.


üíÅ –£–¥–æ–±–Ω–æ –∑–∞–¥–∞—Ç—å –≤ Linux alias –Ω–∞ `d` –∫–æ–º–∞–Ω–¥–æ–π `alias d='docker'`. –ß—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å alias,
–ø—Ä–æ–ø–∏—à–∏—Ç–µ –µ–≥–æ –≤ —Ñ–∞–π–ª–µ `.bashrc` –≤ –¥–æ–º–∞—à–Ω–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (–¥–ª—è Ubuntu).

‚ÑπÔ∏è `docker pull python` = `docker pull python:latest` (`latest` –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –¥–æ–∫–µ—Ä–æ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, 
–µ—Å–ª–∏ —Ç–µ–≥ –Ω–µ —É–∫–∞–∑–∞–Ω)

üíÅ ID –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ –∫–æ–º–∞–Ω–¥–∞—Ö –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å —á–∞—Å—Ç–∏—á–Ω–æ, –ø–µ—Ä–≤—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏  

üíÅ –ü–æ—Å–ª–µ –∫–æ–º–∞–Ω–¥—ã –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∫–∞–∫ –æ–¥–∏–Ω, —Ç–∞–∫ –∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–π/ID –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª

üíÅ –ü—Ä–∞–≤–∏–ª–æ –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç–∏ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö: **—Å–ª–µ–≤–∞ ‚Äî —Ö–æ—Å—Ç, —Å–ø—Ä–∞–≤–∞ ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.**

`-p 127.0.0.1:6379:6379`, –≥–¥–µ
- `127.0.0.1:6379` ‚Äî —Ö–æ—Å—Ç
- `6379` ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

`COPY . /project/app/`, –≥–¥–µ
- `.` ‚Äî —Ö–æ—Å—Ç
- `/project/app/` ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä


## [‚Üë](#Docker) –ö–æ–º–∞–Ω–¥—ã

`docker login`  
`docker logout`  

`docker push`  
`docker pull`

`docker build -t some_name .` ‚Äî —Å–±–∏–ª–¥–∏—Ç—å/—Å–æ–±—Ä–∞—Ç—å/—Å–æ–∑–¥–∞—Ç—å –æ–±—Ä–∞–∑ (image) —Å –∏–º–µ–Ω–µ–º `some_name` 
–ø–æ –¥–æ–∫–µ—Ä—Ñ–∞–π–ª—É —Å –∏–º–µ–Ω–µ–º `Dockerfile` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏–∑ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `.`, 
—É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –Ω—É–∂–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ

`docker run` ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä  

`docker stop` ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä  
`docker kill` ‚Äî —É–±–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–∞–Ω–∞–ª–æ–≥ kill –≤ Linux)  

`docker rm` ‚Äî —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä  
`docker rmi` ‚Äî —É–¥–∞–ª–∏—Ç—å –æ–±—Ä–∞–∑  

–£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å–∫–æ–ø–æ–º: 

`docker container prune`  
`docker image prune`  
`docker network prune`  
`docker volume prune`  

`docker tag old_tag_name new_tag_name` ‚Äî –∏–∑–º–µ–Ω–∏—Ç—å —Ç–µ–≥/–∏–º—è –æ–±—Ä–∞–∑–∞

`docker exec -it –ª—é–±–∞—è_–∫–æ–º–∞–Ω–¥–∞` ‚Äî –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (`[Ctrl]` + `[d]` ‚Äî –≤—ã—Ö–æ–¥ –∏–∑ –∫.)


## [‚Üë](#Docker) Dockerfile

–î–æ–∫–µ—Ä—Ñ–∞–π–ª ‚Äî —ç—Ç–æ —Ñ–∞–π–ª, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º `Dockerfile`, –≤ –∫–æ—Ç–æ—Ä—ã–π –≤—ã –ø–∏—à–∏—Ç–µ –¥–ª—è –¥–æ–∫–µ—Ä–∞
–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –æ–±—Ä–∞–∑–∞.

### –î–∏—Ä–µ–∫—Ç–∏–≤—ã

‚ÑπÔ∏è –ö–æ–º–∞–Ω–¥—ã (–¥–∏—Ä–µ–∫—Ç–∏–≤—ã) –¥–µ–ª—è—Ç—Å—è –Ω–∞ –¥–≤–µ —á–∞—Å—Ç–∏:
- —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –º–æ–º–µ–Ω—Ç –±–∏–ª–¥–∞/—Å–æ–∑–¥–∞–Ω–∏—è –æ–±—Ä–∞–∑–∞ (`FROM`, ..)
- —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –º–æ–º–µ–Ω—Ç –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (`CMD`, ..)

`FROM python:3.8-slim` ‚Äî –ø—Ä–∏–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ —Å –∫–æ–º–∞–Ω–¥–æ–π/–¥–∏—Ä–µ–∫—Ç–∏–≤–æ–π –¥–æ–∫–µ—Ä—Ñ–∞–π–ª–∞

- `FROM` ‚Äî –¥–∏—Ä–µ–∫—Ç–∏–≤–∞ `–°–æ–∑–¥–∞—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ`  
- `python:3.8-slim` ‚Äî –∏–º—è/—Ç–µ–≥ –æ–±—Ä–∞–∑–∞

`WORKDIR` ‚Äî —Å–æ–∑–¥–∞–µ—Ç –ø–∞–ø–∫—É –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –µ—Å–ª–∏ —Ç–∞–∫–æ–π –Ω–µ—Ç –∏ –∑–∞–¥–∞–µ—Ç –µ–µ –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω—É—é –¥–ª—è –≤—Å–µ—Ö
–ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∫–æ–º–∞–Ω–¥  
`WORKDIR projects/app/`

`COPY` ‚Äî –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ —Ö–æ—Å—Ç–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä  
`COPY . .` ‚Äî —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∏–∑ —Ç–µ–∫—É—â–µ–π (`.`) –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ö–æ—Å—Ç–∞ –≤ —Ç–µ–∫—É—â—É—é (`.`) –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (`WORKDIR`)

`RUN` ‚Äî –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –≤ –æ–±—Ä–∞–∑–µ  
`RUN pip install --nocache-dir -r requiements.txt` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –±–µ–∑ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
–∏—Ö (`--nocache-dir` ‚Äî –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è "–¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–æ–≤" –ø–∞–∫–µ—Ç–æ–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ)

`ENV` ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è  
`ENV USERNAME=Mark PASSWORD=Strong_Pass`


## [‚Üë](#Docker) –û–±—â–∏–µ ¬´–ø–∞–ø–∫–∏¬ª –º–µ–∂–¥—É —Ö–æ—Å—Ç–æ–º –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º, 2 –ø–æ–¥—Ö–æ–¥–∞: `bind mounts` –∏ `volume`

Ô∏è‚ùóÔ∏è –ò `bind mounts` –∏ `volume` –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π `--volume`/`-v`

### `bind mounts` ‚Äî –æ–±—ã—á–Ω–∞—è –æ–±—â–∞—è –ø–∞–ø–∫–∞
–£–∫–∞–∑–∞–Ω–Ω–∞—è –ø–∞–ø–∫–∞ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –±—É–¥–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–µ—Å–ª–∏ –æ–Ω–∞ –∏–º–µ–µ—Ç—Å—è), –¥–æ—Å—Ç—É–ø–Ω–æ –±—É–¥–µ—Ç —Ç–æ,
—á—Ç–æ –ª–µ–∂–∏—Ç –≤ –ø–∞–ø–∫–µ –Ω–∞ —Ö–æ—Å—Ç–µ (–ª–æ–∫–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

    docker run --volume LOCAL-PATH:CONTAINER-PATH  

    docker run -v /home/anna/project:/app/:ro (ro ‚Äî —Ä–µ–∂–∏–º readonly)  


    docker run -v $(pwd):/opt/project ($(pwd) ‚Äî –∞–¥—Ä–µ—Å —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤ Linux)
    =
    docker run --mount type=bind,source="$(pwd)",target=/opt/project

### `volume` ‚Äî
–û–±—ä–µ–∫—Ç –¥–æ–∫–µ—Ä–∞ `volume` –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –ø–∞–ø–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
(–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç), —Ä–∞–±–æ—Ç–∞ —Å `volume` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
—Å –ø–æ–º–æ—â—å—é –¥–æ–∫–µ—Ä–∞.
`volume` –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –∫–∞–∫ —Ñ–ª–µ—à–∫–∏ –∫ –∫–æ–º–ø—å—é—Ç–µ—Ä—É.

    docker run --volume VOLUME-NAME:CONTAINER-PATH (VOLUME-NAME ‚Äî –ª—é–±–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ)

    docker run -v project-data:/app/

    docker run --mount source=mysql-data,target=/var/lib/mysql

#### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è `volume`

    doker volume create NAME (—Ä–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ RUN)
    doker volume ls
    doker volume inspect NAME
    doker volume rm NAME

### –†–µ–∑—é–º–∏—Ä—É—è –∏–º–µ–µ–º:

    volume/bind mounts:  docker run -v LOCAL_PATH:CONTAINER_PATH  
    volume/mounts:       docker run -v VOLUME_NAME:CONTAINER_PATH

    volume/bind mounts:  –ù–∞—Ö–æ–¥—è—Ç—Å—è –≤ –≤–∞—à–µ–π —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ 
    volume/mounts:       –ù–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –¥–æ–∫–µ—Ä–∞

    volume/bind mounts:  –£–¥–æ–±–Ω–æ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ, —á—Ç–æ–± –¥–æ—Å—Ç—É–ø –±—ã–ª –∏ —É –¥—Ä—É–≥–∏—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä, 
                         –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ –≤ –∫–æ–º–∞–Ω–¥–µ –≤—Å–µ –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫ –æ–¥–Ω–æ–π –ë–î,
                         –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±—É–¥–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –ø–∞–ø–∫–µ –∫–∞–∫ –∫ —Å–≤–æ–µ–π –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å 
                         –≤ –Ω–µ–µ —Ñ–∞–π–ª—ã –ë–î

    volume/mounts:       –£–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ/–ª–∏—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è,
                         –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Å–≤–æ—é –≤–µ—Ä—Å–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–µ–±—è, –Ω–∞–ø—Ä–∏–º–µ—Ä.


## [‚Üë](#Docker) –û—Ç–¥–µ–ª—å–Ω–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å –≤–Ω—É—Ç—Ä–∏ –¥–æ–∫–µ—Ä–∞, –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

| –¢–∏–ø —Å–µ—Ç–∏ | –û–ø–∏—Å–∞–Ω–∏–µ                                                                |
|----------|-------------------------------------------------------------------------|
| bridge   | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ç–∏–ø, —Å –ø—Ä–æ–±—Ä–æ—Å–æ–º –ø–æ—Ä—Ç–æ–≤.                                    |
| host     | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω –Ω–∞–ø—Ä—è–º—É—é –∫ —Å–µ—Ç–∏ —Å–≤–æ–µ–≥–æ —Ö–æ—Å—Ç–∞                        |
| overlay  |                                                                         |
| none     | –î–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–æ–±—â–µ –Ω–∏ –∫ —á–µ–º—É –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã, –ø–æ—Ä—Ç—ã –∑–∞–∫—Ä—ã—Ç—ã. |

‚ùó –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–∫–æ–º–∞–Ω–¥–∞ `run`) –∏ —É–∫–∞–∑–∞–Ω–∏–∏ –∏–º–µ–Ω–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `-n`, 
—ç—Ç–æ –∏–º—è —Å—Ç–∞–Ω–µ—Ç —Å–µ—Ç–µ–≤—ã–º –∞–¥—Ä–µ—Å–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–∫–∞–∫ google.com) –≤–Ω—É—Ç—Ä–∏ —É–∫–∞–∑–∞–Ω–Ω–æ–π —Å–µ—Ç–∏ –¥–æ–∫–µ—Ä–∞ –∏
–º–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ —ç—Ç–æ–º—É –∏–º–µ–Ω–∏ –∫–∞–∫ –∫ –¥–æ–º–µ–Ω–Ω–æ–º—É –∏–º–µ–Ω–∏/IP-–∞–¥—Ä–µ—Å—É.

#### –ö–æ–º–∞–Ω–¥—ã `docker network`
             
    docker network ls

    docker network create NAME

    docker network inspect NAME

    docker network rm NAME

    docker network connect NETWORK_NAME CONTAINER_NAME
    (–ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫ –∫–∞–∫–æ–π-—Ç–æ —Å–µ—Ç–∏ –Ω–∞ –ª–µ—Ç—É)


## [‚Üë](#Docker) docker-compose

üíÅ –£–¥–æ–±–Ω–æ –∑–∞–¥–∞—Ç—å –≤ Linux alias –Ω–∞ `dc` –∫–æ–º–∞–Ω–¥–æ–π `alias dc='docker-compose'` –ß—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å alias,
–ø—Ä–æ–ø–∏—à–∏—Ç–µ –µ–≥–æ –≤ —Ñ–∞–π–ª–µ `.bashrc` –≤ –¥–æ–º–∞—à–Ω–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (–¥–ª—è Ubuntu).

‚ÑπÔ∏è –ò–º—è –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî —ç—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–µ –∏–º—è –∫–∞—Ç–∞–ª–æ–≥–∞ –ø—Ä–æ–µ–∫—Ç–∞. –í—ã –º–æ–∂–µ—Ç–µ –∑–∞–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –∏–º—è –ø—Ä–æ–µ–∫—Ç–∞ —Å 
–ø–æ–º–æ—â—å—é –æ–ø—Ü–∏–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ -p –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `COMPOSE_PROJECT_NAME`.

üíÅ `docker-compose` –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –Ω–∞ —Å–µ—Ä—å–µ–∑–Ω–æ–º –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

‚ÑπÔ∏è –°–µ—Ç—å —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å –∏–º–µ–Ω–µ–º –ø–∞–ø–∫–∏ –≥–¥–µ –ª–µ–∂–∏—Ç —ç—Ç–æ—Ç `docker-compose.yaml`

–ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ `docker-compose.yaml`

    version: '3.9'
    volumes:  # –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏, –º–æ–∂–Ω–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å
        wordpress-data: {}  # –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏, –º–æ–∂–Ω–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å
        mysql-data: {}  # –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏, –º–æ–∂–Ω–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å
    services: 
        wordpress: # –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏–º—è –≤ —Å–µ—Ç–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π —Å–µ—Ä–≤–∏—Å—ã –±—É–¥—É—Ç –æ–±—â–∞—Ç—å—Å—è, –ª—é–æ–µ –ø—Ä–∏–¥—É–º–∞–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–∑—ã–≤–∞—Ç—å –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –¥–æ–º–µ–Ω–Ω—ã—Ö –∏–º–µ–Ω)
            image: wordpress:5.5.1-php7.3 # –æ–±—Ä–∞–∑
            volumes: 
                - wordpress-data:/var/www/html # –ú–æ–Ω—Ç–∏—Ä—É–µ–º volume wordpress-data –≤ –ø–∞–ø–∫—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ /var/www/html 
            depends_on: # Wordpress –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ë–î, –æ–Ω –±—É–¥–µ—Ç –∂–¥–∞—Ç—å –ø–æ–∫–∞ —Å—Ç–∞—Ä—Ç–∞–Ω–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä database
                        # (–∏–º–µ–Ω–Ω–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —Å—Ç–∞—Ä—Ç —Å–∞–º–æ–π –ë–î –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∂–¥–∞—Ç—å –Ω–µ –±—É–¥–µ—Ç)
                - database
            ports: # –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ—Ä—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ 80 –Ω–∞ 8080 —Ö–æ—Å—Ç–∞
                - "8000:80"
            restart: on-failure # –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≥—Ä–æ—Ö–Ω–µ—Ç—Å—è
                                # restart: "no" ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è 
                                # restart: always ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, –≤—Å–µ –≤—Ä–µ–º—è –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è)
                                # restart: on-failure ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –µ—Å–ª–∏ –≥—Ä–æ—Ö—É–ª—Å—è –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, –≤–µ–¥—å –Ω–∞ —Å–µ—Ä–≤–∏—Å–µ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ –∑–Ω–∞—á–∏—Ç)
                                # restart: unless-stopped
            environment:
                WORDPRESS_DB_HOST: database:3306
                WORDPRESS_DB_USER: wordpress
                WORDPRESS_DB_PASSWORD: wordpress 
                WORDPRESS_DB_NAME: wordpress
        database: 
            image: mysql:5.7 
            volumes: 
                - mysql-data:/var/lib/mysql 
            restart: on-failure 
            environment: 
                MYSQL_ROOT_PASSWORD: secretpassword
                MYSQL_DATABASE: wordpress
                MYSQL_USER: wordpress
                MYSQL_PASSWORD: wordpress

### –ö–æ–º–∞–Ω–¥—ã 

`docker-compose up` ‚Äî –∑–∞–ø—É—Å–∫  
`docker-compose up -d` ‚Äî –∑–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ  

–ï—Å–ª–∏ –≤–º–µ—Å—Ç–æ `image: wordpress:5.5.1-php7.3` –∑–∞–¥–∞—Ç—å `build: —Å—Å—ã–ª–∫–∞_–Ω–∞_–ø–∞–ø–∫—É`, —Ç–æ 
`docker-compose build` ‚Äî —Å–±–∏–ª–¥–∏—Ç –±–∏–ª–¥—ã

`docker-compose logs [-f] [your_service_name]` ‚Äî —Ç–æ –∂–µ —Å–∞–º–æ–µ, —á—Ç–æ docker logs (–Ω–µ –∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∞ –∏–º—è —Å–µ—Ä–≤–∏—Å–∞ –≤ docker compose)

`docker-compose exec your_service_name –ª—é–±–∞—è_–∫–æ–º–∞–Ω–¥–∞` ‚Äî –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `–ª—é–±–∞—è_–∫–æ–º–∞–Ω–¥–∞`, –ø—Ä–∏ —ç—Ç–æ–º –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `-it` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏  

`docker-compose stop [your_service_name]`  

`docker-compose start [your_service_name]` ‚Äî –µ—Å–ª–∏ —É–∫–∞–∑–∞—Ç—å —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ `depends_on`, 
—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∏ —Ç–æ—Ç, –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å  

`docker-compose restart [your_service_name]`  

`docker-compose kill [your_service_name]`  

`docker-compose down` ‚Äî –∑–∞—á–∏—Å—Ç–∫–∞, —É–¥–∞–ª—è–µ—Ç —Å–µ—Ç—å –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, volumes –Ω–µ —É–¥–∞–ª—è–µ—Ç  


## [‚Üë](#Docker) –§–∞–π–ª—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

‚ÑπÔ∏è [–°–∏–Ω—Ç–∞–∫—Å–∏—Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ docker-compose](https://docs.docker.com/compose/compose-file/#environment) 

–ù—É–∂–Ω—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–± –±—ã—Å—Ç—Ä–æ —Å–º–µ–Ω–∏—Ç—å –æ–¥–Ω–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ –¥—Ä—É–≥–∏–µ

~~‚ùó –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `docker-compose` –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∞–π–ª `.env`, 
–¥–∞–∂–µ –µ—Å–ª–∏ —Ç–æ—Ç –Ω–µ –ø—Ä–æ–ø–∏—Å–∞–Ω (_Convention over configuration_)~~

‚ùó –î–æ–±–∞–≤–ª—è–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ `.gitignore`

–ü–∞—Ä–∞–º–µ—Ç—Ä `env_file`

`docker-compose.yaml`:

    version: '3'
    services:
      generator:
        build: .
        environment:
          KILLRVIDEO_YOUTUBE_API_KEY2: "2wefwv435tgweg"
        env_file:
          - ./dev.env

`dev.env`:

          KILLRVIDEO_YOUTUBE_API_KEY="23423f4dfgfsdgrt34t3gweg"
          KILLRVIDEO_LOGGING_LEVEL=debug


## [‚Üë](#Docker) –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ

üíÅ –í –ø–æ–¥–∞–≤–ª—è—é—â–µ–º –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ç–∞–∫:  

    git clone
    docker-compose up -d


‚ÑπÔ∏è 2 —Å—Ü–µ–Ω–∞—Ä–∏—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º:
1. —Ç–æ–ª—å–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º ‚Äî –º—ã —Ö–æ—Ç–∏–º –∑–∞–ø—É—Å—Ç–∏—Ç—å –µ–≥–æ –∏ –ø–æ—Ç—ã–∫–∞—Ç—å
2. —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ ‚Äî –Ω–∞–º –Ω—É–∂–Ω–æ —á—Ç–æ-—Ç–æ –º–µ–Ω—è—Ç—å

üíÅ –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã –∫–æ–º–∞–Ω–¥—ã –Ω–∞–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥, –±—ç–∫–µ–Ω–¥, –ë–î) —Å –¥–æ–∫–µ—Ä–æ–º.
- —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—â–∏–∫ ‚Äî –±—ç–∫–µ–Ω–¥ –∏ –ë–î –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–±—Ä–∞–∑–æ–≤
- –±—ç–∫–µ–Ω–¥—â–∏–∫ ‚Äî —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏ –ë–î –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–±—Ä–∞–∑–æ–≤

üíÅ –ü—Ä–∏–º–µ—Ä docker-compose —Ñ–∞–π–ª–∞ –¥–ª—è 2-—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.  

    $(pwd)/generator ‚Äî –º–µ—Å—Ç–æ, –≥–¥–µ –ª–µ–∂–∏—Ç –º–æ–π –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–¥

    1.
    services: 
        generator:
            # image: killrvideo/killrvideo-generator
            build: ./generator
        volumes:
            - "$(pwd)/generator":opt/killrvideo-generator

    2.
    services: 
        generator:
            image: killrvideo/killrvideo-generator
            # build: ./generator
        volumes:
            # - "$(pwd)/generator":opt/killrvideo-generator

üíÅ –î–æ–∫–µ—Ä-—Ñ–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –±–∏–ª–¥–∏—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (–¥–ª—è –∫—Ä—É–ø–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤)

üíÅ –ü—Ä–∏–º–µ—Ä —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- –ù–∞–∑–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞
(—á—Ç–æ–± –Ω–µ –∑–∞–ø—É—Ç–∞—Ç—å—Å—è)

- `KILLRVIDEO_LOGGING_LEVEL: debug` - —Ä–∞—Å–∫–æ–º–º–µ–Ω—á–µ–Ω, –ø–æ –¥–µ—Ñ–æ–ª—Ç—É 
–º–æ–∂–µ—Ç –±—ã—Ç—å `WARNING` –∏–ª–∏ `ERROR`

- `command` ‚Äî –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –∏–∑ –¥–æ–∫–µ—Ä-—Ñ–∞–π–ª–∞


    version: '3'
    services:
      # The KillrVideo Sample Data Generator
      generator:
        build: .
        #image: killrvideo/killrvideo-generator
        volumes:
          - .:/opt/killrvideo-generator
        ports:
          - "5858:5858"
        depends_on:
          - dse
          - backend
        environment:
          KILLRVIDEO_YOUTUBE_API_KEY: SET_YOUR_YOUTUBE_KEY_HERE
          KILLRVIDEO_LOGGING_LEVEL: debug
        command: "node --debug /opt/killrvideo-generator/dist/index.js"

‚ÑπÔ∏è –ù–∞ –¥–µ–ø–ª–æ–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –≤ –Ω–µ –ø–µ—Ç-–ø—Ä–æ–µ–∫—Ç–∞—Ö –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç docker-compose, –∞,
–Ω–∞–ø—Ä–∏–º–µ—Ä, Kubernetes –∏–ª–∏ OpenShift

üíÅ Smoke Testing (–≤–∫–ª—é—á–∏—Ç—å –∏ –µ—Å–ª–∏ –Ω–µ –∑–∞–¥—ã–º–∏–ª—Å—è, —Ç–æ –û–ö) ‚Äî –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

## [‚Üë](#Docker) –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ ‚Äî Debug

(–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —è–∑—ã–∫–∞, IDE –∏ —Ç.–ø.)


## [‚Üë](#Docker) –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ ‚Äî Autobuild (CI/CD)

- Jenkins
- Travis CI
- Github Actions (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–ª—è opensource) üëç
- and more...

üíÅ `git tag` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–∞–∫–æ–π –∂–µ, –∫–∞–∫ –∏ `docker tag`


## [‚Üë](#Docker) –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ ‚Äî –æ—à–∏–±–∫–∏

Changeset

    ‚ùå
    RUN pip install redis
    RUN pip install requests

    ‚úÖ
    RUN pip install redis && pip install requests

    ‚úÖ‚úÖ‚úÖ
    RUN apt update && \
        pip3 install --no-cache-dir -r requirements.txt


## [‚Üë](#Docker) –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ ‚Äî –º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω—ã–µ –±–∏–ª–¥—ã

(–≥–æ–ª–∞–Ω–≥, –¥–∂–∞–≤–∞...)

## [‚Üë](#Docker) –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ ‚Äî Labels

–í –∫—Ä—É–ø–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å, —á—Ç–æ –∑–∞ –æ–±—Ä–∞–∑/–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (—ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –æ–±—Ä–∞–∑—É, 
–º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)

- Repository
- Maintainer / Team
- Build Number / Link
- Build Date
- Git Commit Hash
- Etc.


## [‚Üë](#Docker) –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ ‚Äî Multi-Process Containers (–∫–æ–≥–¥–∞ —Å–µ—Ä–≤–∏—Å —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö+ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤)

‚ùó –ò–∑–±–µ–≥–∞—Ç—å, –Ω–æ –µ—Å–ª–∏ –Ω–∞–¥–æ, —Ç–æ 
https://github.com/just-containers/s6-overlay


## [‚Üë](#Docker) –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–∏–º–∏—Ç—ã

- Non-Root User ‚ù§Ô∏è
- Limit Memory and Swap
- Use :ro read-only volumes/mounts ‚ù§Ô∏è
- Bash strict mode set -euo pipefail ‚ù§Ô∏è
- Avoid --privileged, use --cap-add instead


## [‚Üë](#Docker) –õ–∏–Ω—Ç–µ—Ä –¥–ª—è Dockerfile

https://hadolint.github.io/hadolint/

## [‚Üë](#Docker) CMD vs ENTRYPOINT


### –ö–∞–∫ "—Ä–∞–±–æ—Ç–∞–µ—Ç" `CMD` (–∫–ª–∞–¥–µ—Ç–µ —Ç–æ, —á—Ç–æ –º–µ–Ω—è–µ—Ç—Å—è —á–∞—Å—Ç–æ)

    FROM python:3-alpine
    COPY . .
    CMD ["flask", "run", "--host=0.0.0.0", "--port=80"]

`docker run your_container_id ` = `docker run your_container_id flask run --host=0.0.0.0 --port=80`

### –ö–∞–∫ "—Ä–∞–±–æ—Ç–∞–µ—Ç" `ENTRYPOINT`  (–∫–ª–∞–¥–µ—Ç–µ —Ç–æ, —á—Ç–æ –º–µ–Ω—è–µ—Ç—Å—è —Ä–µ–¥–∫–æ)

    FROM python:3-alpine
    COPY . .
    ENTRYPOINT ["flask", "run", "--host=0.0.0.0", "--port=80"]

`docker run your_container_id ` =  `docker run your_container_id flask run --host=0.0.0.0 --port=80`

### –ö–∞–∫ –æ–Ω–∏ "—Ä–∞–±–æ—Ç–∞—é—Ç" –≤–º–µ—Å—Ç–µ

    FROM python:3-alpine
    COPY . .
    CMD ["--host=0.0.0.0", "--port=80"]
    ENTRYPOINT ["flask", "run"]

`docker run your_container_id` = `docker run your_container_id ENTRYPOINT+CMD`

`docker run your_container_id ` = `docker run your_container_id flask run --host=0.0.0.0 --port=80`

–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `CMD`  
`docker run your_container_id flask run --host=12.12.12.12 --port=80` = `docker run your_container_id --host=12.12.12.12`  

–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å `ENTRYPOINT` —Å `["flask", "run"]` –Ω–∞ `["flask", "routes"]`  
`docker run --entrypoint="flask" your_container_id  routes`  


[‚Üë –ù–∞–≤–µ—Ä—Ö](#Docker) 

